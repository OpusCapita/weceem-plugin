<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>2 Configuration and installation 1.2</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/1.Introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/2.ConfigurationAndInstallation.html"><strong>2</strong><span>Configuration and installation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/3.GeneralBehaviourAndConcepts.html"><strong>3</strong><span>General behaviour and concepts</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/4.WeceemSecuritPolicy.html"><strong>4</strong><span>Weceem security policy</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/customization.html"><strong>5</strong><span>Customization</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>Weceem CMS is a free, open source content management system.</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/1.Introduction.html">&lt;&lt; <strong>1</strong><span>Introduction</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/3.GeneralBehaviourAndConcepts.html"><strong>3</strong><span>General behaviour and concepts</span> >></a></div>
                


                <div class="project">
                    <h1>2 Configuration and installation - Reference Documentation</h1>

                    <p><strong>Authors:</strong> jCatalog AG</p>

                    <p><strong>Version:</strong> 1.2</p>

                    
                </div>

                

                

<h1 id="2.ConfigurationAndInstallation">2 Configuration and installation</h1>
<h3> Installation</h3><p class="paragraph"/>Weceem is available either as a standalone Java web application (.war file) for deployment to standard Java server environments, or as a plugin for the <a href="http://grails.org/" target="blank">Grails application framework</a>.<p class="paragraph"/><h4> Requirements</h4><p class="paragraph"/>Deploying Weceem CMS requires:
<ul class="star">
<li> Java 6 or higher</li>
<li> A supported SQL server e.g. MySQL or Postgres</li>
<li> A recommended 500MB RAM allocated to the Java VM</li>
<li> A writeable filesystem folder for storing Lucene full-text search indexes</li>
</ul><p class="paragraph"/>You don't need to install or have any understanding of Grails to use Weceem, but if you want to develop a custom application that uses Weceem, you will also need to install Grails.<p class="paragraph"/><h4>Upgrading all Weceem installations</h4><p class="paragraph"/>Prior to installing a new version of Weceem, always export each of your spaces to ensure you have a backup. Additionally, ensure your database and uploaded files (e.g. WeceemFiles/) folder are backed up.<p class="paragraph"/><h4>Installing Weceem Plugin into the application</h4><p class="paragraph"/>To install the Weceem plugin, the dependency must be added into grails-app/conf/BuildConfig.groovy file in Grails application.
<div class="code"><pre>compile ':weceem:1.2&#45;SNAPSHOT'</pre></div><p class="paragraph"/>The plugin should function with Grails versions 2.1 and higher.<p class="paragraph"/>Once the plugin is installed into the application, a few Grails configuration changes may be required to make the CMS work in your application. These options are required for Weceem to operate correctly inside the application.<p class="paragraph"/><strong class="bold">Note:</strong> When upgrading from an earlier version of the Weceem plugin, you may need to manually uninstall some older Grails plugins, if your new release of Grails does not do it automatically.<p class="paragraph"/><strong class="bold">Warning!</strong> Weceem plugin uses Searchable plugin (version 0.6.6), it requires additional maven repository  <em class="italic">"http://repo.grails.org/grails/core"</em>  for getting
dependencies. Do not forget to configure:<p class="paragraph"/><div class="code"><pre>repositories &#123;
             &#8230;
             mavenRepo <span class="java&#45;quote">"http://repo.grails.org/grails/core"</span><p class="paragraph"/>         &#125;</pre></div><p class="paragraph"/><h3> Configuration</h3><p class="paragraph"/>Once the plugin is installed, there may be some Grails configurations that need to be changed to make the CMS work in the application. These options are required for Weceem to operate correctly within the application.<p class="paragraph"/>Configuration of Weceem is primarily through Grails configuration settings. In Weceem application these will come from a properties file that could be configured via system property <div class="code"><pre>weceem.config.location</pre></div> specified in the command line. But in the custom Grails application confuguration is typically loaded from Config.groovy.<p class="paragraph"/>There are several configuration options that allow you to customize how it behaves and looks.<p class="paragraph"/><h4> Allowing file extensions</h4><p class="paragraph"/>By default, Grails applications have content negotiation enabled based on file extensions in the URI, and this file extension is then removed from the URI. For the CMS to function correctly with content URIs like "common.css" and "jquery.js", you need to turn this off. To do so, change your application's Config.groovy to :<p class="paragraph"/><div class="code"><pre>grails.mime.file.extensions = <span class="java&#45;keyword">false</span></pre></div><p class="paragraph"/><h4> Default codec usage</h4><p class="paragraph"/>By default, Grails applications are configured to use value 'html' - legacy setting for codec used to encode data with ${} . But Weceem plugin requires such data without encoding.<p class="paragraph"/><div class="code"><pre>grails.views.<span class="java&#45;keyword">default</span>.codec=<span class="java&#45;quote">"none"</span></pre></div><p class="paragraph"/><h4> URL mappings and Weceem</h4><p class="paragraph"/>To replicate the behaviour of the binary Weceem Application WAR that can serve content from the "/" URI of your application, you must ensure the default URL Grails mapping for "/" in your application is removed. You will also probably benefit from removing the generic "$controller/$action?/$id?" mapping which can cause confusion.<p class="paragraph"/>You can namespace all Weceem controllers using configuration options to prefix all URIs that Weceem uses.<p class="paragraph"/><h4>Setting URL prefix for all content served by Weceem</h4><p class="paragraph"/>Weceem by default maps all created content into the "root" URI of the application. URLs are formed by "/{space URI alias}/${document URI alias path....}". Having a space with a blank alias URI, allows you to map content into the root URI.  To achieve this Weceem has to be rather promiscuous with its URI mapping.<p class="paragraph"/>If you would like your own controllers to be accessible with your own Grails URL mappings, you can prefix all content URIs by setting a single Config.groovy setting:<p class="paragraph"/><div class="code"><pre>weceem.content.prefix = 'content'</pre></div><p class="paragraph"/>With this, all Weceem content will be accessed under "/content/" - i.e.  http://localhost:8080/content/About<p class="paragraph"/><h4>Setting URL prefix for non-content Weceem controllers</h4><p class="paragraph"/>Weceem has its own non-content controllers that provide publicly-accessible support functionality such as the search, archive and visitor content submission controllers. If there are name conflicts with your own controllers, prefix these URIs with the following Config.groovy setting:<p class="paragraph"/><div class="code"><pre>weceem.tools.prefix = 'wcm&#45;tools'</pre></div><p class="paragraph"/>This will then ensure that all the Weceem tool controllers are accessed like this <code>http://localhost:8080/wcm-tools/search</code><p class="paragraph"/><h4>Setting URL prefix for Weceem administration UI</h4><p class="paragraph"/>The Weceem repository and administration UIs may also clash with your URI conventions, or you may have your own "admin" controller that you want at "/admin". For this, you can just change the prefix for the Weceem Admin controllers by adding the following to Config.groovy:<p class="paragraph"/><div class="code"><pre>weceem.admin.prefix = 'wcm&#45;admin'</pre></div><p class="paragraph"/>The standard Weceem admin interfaces under http://localhost:8080/wcm-admin/<p class="paragraph"/><h4> Defining available default Space templates</h4><p class="paragraph"/>You must tell Weceem what default content spaces are available to users or your code. There are two default spaces provided by the plugin but usually your application will want to specify alternative defaults so that it "boots" with your own content in it.<p class="paragraph"/><h4> Setting the location of uploaded files</h4><p class="paragraph"/>Weceem, by default, will store files uploaded by you (e.g. images, CSS and so on) to a folder inside the application's folder on the server. However, during an application upgrade, this becomes inconvenient because the files will often need to be manually duplicated in the new location on the server.<p class="paragraph"/>Since 1.0-M1 you can set the location of the upload folder or URL:<p class="paragraph"/><div class="code"><pre>// Tell weceem to use a specific path /<span class="java&#45;keyword">var</span>/weceem/uploads
/<span class="java&#45;keyword">var</span>/weceem/uploads weceem.upload.dir = 'file:///<span class="java&#45;keyword">var</span>/weceem/uploads'<p class="paragraph"/>// or tell weceem to keep it in the application folder, but with a <span class="java&#45;keyword">new</span> URL
weceem.upload.dir = '/weceem_uploads/'</pre></div><p class="paragraph"/>Weceem auto-senses file URLs in the value and uses that location if it is a file URL. If it is not a file URL, then it assumes it is a new URL path and uses it when serving the files.<p class="paragraph"/>Weceem will still store the files in <code>&#60;app-dir&#62;/WeceemFiles</code>, if a value is not specified for this config variable. These will be served from <code>http://&#60;yourhost&#62;/&#60;yourapppath&#62;/uploads/</code><p class="paragraph"/><h4>Customizing user profile and logout</h4><p class="paragraph"/>When integrating your own user authentication/authorization system, you will want the Profile and Log Out links in Weceem admin to point to the relevant functions in your application.  Specify a map of arguments that will be passed to the Grails <strong class="bold">g:link</strong> tag to create the links for these functions, with the following Config.groovy settings:<p class="paragraph"/><div class="code"><pre>weceem.profile.url = &#91;controller:'register', action:'edit'&#93; weceem.logout.url = &#91;controller:'logout'&#93;</pre></div><p class="paragraph"/>Controller/action etc can be anything you like. You could use any arguments accepted by the Grails linking tags here e.g: uri, url, params, mapping and so on.<p class="paragraph"/><h4>Customizing the look and feel of Weceem Admin</h4><p class="paragraph"/>For the Weceem Admin pages to fit in better with your application's own styling, you can specify a different layout GSP for it with this Config option:<p class="paragraph"/><div class="code"><pre>weceem.admin.layout=<span class="java&#45;quote">"mylayout"</span></pre></div><p class="paragraph"/>This stops Weceem from using the standard "weceemadmin" GSP layout and uses yours instead.<p class="paragraph"/><h4>Customizing page for 404 Server response</h4><p class="paragraph"/>For the HTTP 404 Server response, you can specify a different GSP page with this Config option:<p class="paragraph"/><div class="code"><pre>weceem.page404 = 'errorpage'</pre></div><p class="paragraph"/>By default, the page '404.gsp' from Weceem plugin is used.<p class="paragraph"/><h4>Controlling creation of the default space</h4><p class="paragraph"/>You can configure whether or not Weceem should create a default space at startup, as well as what templates are available to the user:<p class="paragraph"/><div class="code"><pre>// Turn off <span class="java&#45;keyword">default</span> space creation <span class="java&#45;keyword">if</span> no spaces found at startup weceem.create.<span class="java&#45;keyword">default</span>.space = <span class="java&#45;keyword">false</span><p class="paragraph"/>// Set the file: or classpath: URL of the <span class="java&#45;keyword">default</span> space zip <span class="java&#45;keyword">if</span> <span class="java&#45;keyword">default</span> creation is ON weceem.<span class="java&#45;keyword">default</span>.space.template = <span class="java&#45;quote">"file:/path/to/template.zip"</span></pre></div><p class="paragraph"/><h4>Changing the list of space templates available to users</h4><p class="paragraph"/>To change the list of space templates available to users when they create a new space, list them in your Config:<p class="paragraph"/><div class="code"><pre>// Set the list of available space templates when a user creates a <span class="java&#45;keyword">new</span> space
weceem.space.templates = &#91;
    <span class="java&#45;keyword">default</span>: <span class="java&#45;quote">"classpath:/org/weceem/resources/<span class="java&#45;keyword">default</span>&#45;space&#45;template.zip"</span>,
    basic:<span class="java&#45;quote">"classpath:/org/weceem/resources/basic&#45;space&#45;template.zip"</span>&#93;</pre></div><p class="paragraph"/>Space templates are regular Weceem export ZIPs, and can reside in the file system (file:) or classpath (classpath:)<p class="paragraph"/>Use this to hide the default Weceem spaces and restrict user access to the space templates. This list of space templates does not have to include the default space template, hence you can have a default initial space that is unavailable to the users.



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/1.Introduction.html">&lt;&lt; <strong>1</strong><span>Introduction</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/3.GeneralBehaviourAndConcepts.html"><strong>3</strong><span>General behaviour and concepts</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Domain</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Domain/attach.html">attach</a>
                            </div>
                            
                            </div>
                    </div>
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tags</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Tags/ancestorOfType.html">ancestorOfType</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/archiveList.html">archiveList</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/breadcrumb.html">breadcrumb</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/cache.html">cache</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/content.html">content</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/contentIconURL.html">contentIconURL</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/countChildren.html">countChildren</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/createFeedLink.html">createFeedLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/createLink.html">createLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/createSearchLink.html">createSearchLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/dataFeed.html">dataFeed</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/date.html">date</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/eachChild.html">eachChild</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/eachComment.html">eachComment</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/eachContent.html">eachContent</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/eachParent.html">eachParent</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/eachSibling.html">eachSibling</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/feedLink.html">feedLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/find.html">find</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/findNode.html">findNode</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/htmlToText.html">htmlToText</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/ifContentIs.html">ifContentIs</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/ifContentIsNot.html">ifContentIsNot</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/ifUserCanEdit.html">ifUserCanEdit</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/ifUserCanView.html">ifUserCanView</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/join.html">join</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/link.html">link</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/loggedInEmail.html">loggedInEmail</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/loggedInUserName.html">loggedInUserName</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/menu.html">menu</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/monthNames.html">monthNames</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/render.html">render</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/renderContentItemIcon.html">renderContentItemIcon</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/resource.html">resource</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/search.html">search</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/searchLink.html">searchLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/space.html">space</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/submitContentForm.html">submitContentForm</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/submitContentLink.html">submitContentLink</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/summarize.html">summarize</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/uiMessage.html">uiMessage</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/userInfo.html">userInfo</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/widget.html">widget</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
